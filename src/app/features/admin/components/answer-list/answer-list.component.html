<mat-toolbar color="primary">
  <span>Admin section</span>
  <div class="spacer"></div>
  <button (click)="logout()" mat-button>Logout</button>
</mat-toolbar>

<div id="stats">
  Latest signup: {{lastSignup | date:'short'}}
</div>

<mat-table [dataSource]="dataSource" class="mat-elevation-z8"
           matSort
           matSortActive="signupTime"
           matSortDirection="asc"
>

  <ng-container matColumnDef="signupTime">
    <mat-header-cell *matHeaderCellDef mat-sort-header="signupTime">Signup time</mat-header-cell>
    <mat-cell *matCellDef="let element">{{element.signupTime | date:'short'}}</mat-cell>
  </ng-container>

  <ng-container matColumnDef="name">
    <mat-header-cell *matHeaderCellDef mat-sort-header="name"> Name</mat-header-cell>
    <mat-cell *matCellDef="let element">{{element.name}}</mat-cell>
  </ng-container>

  <ng-container matColumnDef="email">
    <mat-header-cell *matHeaderCellDef mat-sort-header="email"> Email</mat-header-cell>
    <mat-cell *matCellDef="let element">{{element.email}}</mat-cell>
  </ng-container>

  <ng-container matColumnDef="mobile">
    <mat-header-cell *matHeaderCellDef mat-sort-header="section">Mobile</mat-header-cell>
    <mat-cell *matCellDef="let element"> {{element.mobile}} </mat-cell>
  </ng-container>

  <ng-container matColumnDef="status">
    <mat-header-cell *matHeaderCellDef>Status</mat-header-cell>
    <mat-cell *matCellDef="let element">
      <mat-icon *ngIf="element.status === 'pulled'">shuffle</mat-icon>
      <mat-icon *ngIf="element.status === 'notified'">done</mat-icon>
      <mat-icon *ngIf="element.status === 'redeemed'">done_all</mat-icon>
    </mat-cell>
  </ng-container>

  <ng-container matColumnDef="select">
    <mat-header-cell *matHeaderCellDef>
      <mat-checkbox (change)="$event ? toggleAllRows() : null"
                    [checked]="selection.hasValue() && isAllSelected()"
                    [indeterminate]="selection.hasValue() && !isAllSelected()"
                    color="primary"
      >
      </mat-checkbox>
    </mat-header-cell>
    <mat-cell *matCellDef="let row">
      <mat-checkbox (click)="$event.stopPropagation()"
                    (change)="$event ? selection.toggle(row) : null"
                    [checked]="selection.isSelected(row)"
                    color="primary"
      >
      </mat-checkbox>
    </mat-cell>
  </ng-container>

  <ng-container matColumnDef="edit">
    <mat-header-cell *matHeaderCellDef></mat-header-cell>
    <mat-cell *matCellDef="let element">
      <!--      <button (click)="edit($event, element)" mat-icon-button>-->
      <!--        <mat-icon>edit</mat-icon>-->
      <!--      </button>-->
      <!--      <button (click)="delete($event, element)" mat-icon-button>-->
      <!--        <mat-icon>delete_outline</mat-icon>-->
      <!--      </button>-->
    </mat-cell>
  </ng-container>

  <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
  <mat-row *matRowDef="let row; columns: displayedColumns;" (click)="selection.toggle(row)"></mat-row>
</mat-table>

<div id="actions">
  <button mat-flat-button (click)="startPick()" [disabled]="!canPick">Pick random
    <mat-icon>shuffle</mat-icon>
  </button>

  <button mat-flat-button (click)="editSelection()" [disabled]="selection.isEmpty()">
    Edit
    <mat-icon>edit</mat-icon>
  </button>
</div>
